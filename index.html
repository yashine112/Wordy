<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wordy</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Nunito:wght@800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#0F172A; --muted:#64748B;
      --glass: rgba(255,255,255,.86);
      --shadow: 0 18px 50px rgba(15,23,42,.14);
      --shadow2: 0 10px 24px rgba(15,23,42,.10);
      --ring: 0 0 0 4px rgba(124,58,237,.18);
      --p1:#8B5CF6; --p2:#EC4899; --c1:#06B6D4;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1100px 700px at 15% 10%, #FFE3F1 0%, transparent 55%),
        radial-gradient(950px 700px at 85% 25%, #D8F5FF 0%, transparent 58%),
        radial-gradient(900px 700px at 55% 95%, #E8FFE7 0%, transparent 55%),
        linear-gradient(180deg, #FFF7FB, #F2FBFF);
      min-height:100vh;
    }
    .wrap{ max-width:640px; margin:0 auto; padding:18px 14px 30px; }
    .brand{ text-align:center; margin:6px 0 10px; }
    .brand h1{
      margin:0;
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:56px; line-height:1; font-weight:800;
      background: linear-gradient(135deg, var(--p1), var(--p2), var(--c1));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .brand p{ margin:8px 0 0; color:var(--muted); font-weight:900; font-size:14px; }

    /* DEBUG/STATUS (wichtig!) */
    .status{
      margin: 10px 0 12px;
      background: rgba(255,255,255,.92);
      border: 2px solid rgba(124,58,237,.18);
      border-radius: 18px;
      padding: 10px 12px;
      box-shadow: var(--shadow2);
      font-weight: 900;
      color: #4C1D95;
    }

    .card{
      background: var(--glass);
      border: 2px solid rgba(255,255,255,.9);
      box-shadow: var(--shadow);
      border-radius: 28px;
      padding: 14px;
      backdrop-filter: blur(12px);
    }
    .panel{
      background: rgba(255,255,255,.88);
      border-radius: 22px;
      padding: 12px;
      box-shadow: var(--shadow2);
      border: 1px solid rgba(15,23,42,.08);
    }
    label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin:2px 0 8px;
      font-weight:1000;
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    input, select, button{
      width:100%;
      font-size:16px;
      border-radius:18px;
      padding:14px 14px;
      font-family:"Nunito",system-ui,sans-serif;
    }
    input, select{
      background:#fff;
      border:2px solid rgba(15,23,42,.08);
      outline:none;
      box-shadow: 0 8px 18px rgba(15,23,42,.06);
    }
    input:focus, select:focus{ box-shadow: var(--ring); border-color: rgba(124,58,237,.35); }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px; }

    button{
      border:none; cursor:pointer;
      font-weight:1000;
      box-shadow: 0 14px 22px rgba(15,23,42,.14);
      position:relative; overflow:hidden;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: translateY(1px); }
    button:disabled{ opacity:.55; cursor:not-allowed; }
    button::after{
      content:"";
      position:absolute;
      inset:-40% -20% auto -20%;
      height:120%;
      background: linear-gradient(120deg, rgba(255,255,255,.0), rgba(255,255,255,.35), rgba(255,255,255,.0));
      transform: rotate(10deg);
      opacity:.65;
      pointer-events:none;
    }
    .btnPrimary{ background: linear-gradient(135deg, var(--p1), var(--p2)); color:white; }
    .btnDark{ background: linear-gradient(135deg, #111827, #334155); color:white; }
    .btnWord{ background: linear-gradient(135deg, #06B6D4, #22C55E); color:white; }
    .btnGood{ background: linear-gradient(135deg, #16A34A, #22C55E); color:white; }
    .btnBad{ background: linear-gradient(135deg, #EF4444, #F97316); color:white; }

    .turnBig{
      margin-top:12px;
      border-radius: 24px;
      padding: 14px;
      background: rgba(255,255,255,.94);
      border: 4px solid rgba(124,58,237,.22);
      box-shadow: 0 18px 30px rgba(15,23,42,.12);
      text-align:center;
    }
    .turnBig .small{ font-size:12px; color:var(--muted); font-weight:1000; text-transform:uppercase; }
    .turnBig .name{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:44px; font-weight:800; margin-top:4px; line-height:1.05;
    }

    .wordCard{
      margin-top:12px;
      border-radius:26px;
      padding:16px;
      background: rgba(255,255,255,.96);
      border: 2px dashed rgba(124,58,237,.28);
      box-shadow: 0 18px 34px rgba(15,23,42,.12);
      text-align:center;
      min-height: 160px;
      display:flex; flex-direction:column; justify-content:center; gap:10px;
    }
    .wordHint{ font-size:13px; color:var(--muted); font-weight:1000; }
    .word{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:48px; font-weight:800;
    }

    .overlay{
      position:fixed; inset:0;
      background: rgba(15,23,42,.45);
      backdrop-filter: blur(8px);
      z-index: 20000;
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
    }
    .overlay.show{ display:flex; }
    .overlayCard{
      width:min(520px, 100%);
      background: rgba(255,255,255,.96);
      border-radius: 28px;
      box-shadow: 0 24px 70px rgba(15,23,42,.30);
      padding:18px;
      text-align:center;
      border: 2px solid rgba(255,255,255,.9);
    }
    .overlayCard .title{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:34px; font-weight:800; margin:2px 0 6px;
    }
    .overlayCard .text{ color:var(--muted); font-weight:900; margin:0 0 14px; }

    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <div class="overlay" id="handoff">
    <div class="overlayCard">
      <div style="font-size:36px;margin-bottom:6px;">ðŸ“±âœ¨</div>
      <div class="title">Handy weitergeben</div>
      <p class="text" id="handoffText">â€¦</p>
      <button class="btnPrimary" id="handoffOk" type="button">Okay!</button>
    </div>
  </div>

  <div class="wrap">
    <div class="brand">
      <h1>Wordy</h1>
      <p>Kinder-Modus: versteckt â†’ weitergeben â†’ anzeigen â†’ richtig/falsch</p>
    </div>

    <div class="status" id="status">Status: bereit âœ…</div>

    <div class="card">
      <div class="panel">
        <label for="p1name">Name Spieler 1</label>
        <input id="p1name" type="text" placeholder="z. B. Mia" maxlength="18" />

        <label for="p2name" style="margin-top:12px;">Name Spieler 2 (optional)</label>
        <input id="p2name" type="text" placeholder="leer = 1 Spieler" maxlength="18" />

        <label for="difficulty" style="margin-top:12px;">Schwierigkeitsgrad</label>
        <select id="difficulty">
          <option value="leicht" selected>Leicht</option>
          <option value="mittel">Mittel</option>
          <option value="schwer">Schwer</option>
        </select>

        <label for="type" style="margin-top:12px;">Wortart</label>
        <select id="type">
          <option value="all" selected>Alles</option>
          <option value="nomen">Nomen</option>
          <option value="verb">Verb</option>
          <option value="adj">Adjektiv</option>
        </select>

        <div class="grid2">
          <button id="startBtn" class="btnPrimary" type="button">Start</button>
          <button id="restartBtn" class="btnDark" type="button">Neues Spiel</button>
        </div>
      </div>

      <div id="turnBox" class="turnBig hidden">
        <div class="small">Jetzt dran</div>
        <div class="name" id="turnName">â€”</div>
      </div>

      <div class="wordCard">
        <div class="wordHint" id="wordHint">DrÃ¼ck Start ðŸ˜Š</div>
        <div class="word" id="word">â€”</div>
        <button id="revealBtn" class="btnWord" type="button" disabled>Wort anzeigen</button>
      </div>

      <div class="grid2" style="margin-top:12px;">
        <button id="rightBtn" class="btnGood" type="button" disabled>Richtig (+1)</button>
        <button id="wrongBtn" class="btnBad" type="button" disabled>Falsch (âˆ’1)</button>
      </div>
    </div>
  </div>

  <script>
    // WÃ¶rter (kurz â€“ du kannst spÃ¤ter 100+ ergÃ¤nzen)
    const WORDS = {
      leicht: {
        nomen:["Apfel","Hund","Katze","Schule","Buch","Ball","Auto","Blume","Baum","Haus"],
        verb:["laufen","springen","lesen","malen","lachen","essen","trinken","spielen","singen","tanzen"],
        adj:["bunt","schnell","groÃŸ","klein","nett","laut","leise","warm","kalt","frÃ¶hlich"]
      },
      mittel: {
        nomen:["Abenteuer","Geheimnis","Regenbogen","Bibliothek","Schatzkarte","Kompass","Rakete","Roboter","Dschungel","Vulkan"],
        verb:["entdecken","verstecken","vergleichen","erklÃ¤ren","beobachten","erfinden","trainieren","Ã¼berzeugen","organisieren","reparieren"],
        adj:["neugierig","geheim","riesig","knifflig","tapfer","geduldig","vorsichtig","aufmerksam","mysteriÃ¶s","hilfsbereit"]
      },
      schwer: {
        nomen:["Gerechtigkeit","Verantwortung","Perspektive","Zusammenhang","Nachhaltigkeit","Bewusstsein","Zivilcourage","Argumentation","Diplomatie","KomplexitÃ¤t"],
        verb:["reflektieren","argumentieren","interpretieren","analysieren","differenzieren","veranschaulichen","formulieren","hinterfragen","prognostizieren","strukturieren"],
        adj:["ambivalent","konsequent","nachhaltig","subtil","kontrovers","komplex","pragmatisch","konstruktiv","authentisch","resilient"]
      }
    };

    // Elemente
    const statusEl = document.getElementById("status");
    const p1nameEl = document.getElementById("p1name");
    const p2nameEl = document.getElementById("p2name");
    const difficultyEl = document.getElementById("difficulty");
    const typeEl = document.getElementById("type");

    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");
    const revealBtn = document.getElementById("revealBtn");
    const rightBtn = document.getElementById("rightBtn");
    const wrongBtn = document.getElementById("wrongBtn");

    const turnBox = document.getElementById("turnBox");
    const turnName = document.getElementById("turnName");
    const wordHint = document.getElementById("wordHint");
    const wordEl = document.getElementById("word");

    const handoff = document.getElementById("handoff");
    const handoffText = document.getElementById("handoffText");
    const handoffOk = document.getElementById("handoffOk");

    // State
    let started = false;
    let currentWord = null;
    let revealed = false;

    let name1 = "Spieler 1";
    let name2 = "Spieler 2";
    let twoPlayers = false;
    let currentPlayer = 1;

    const deck = {}; // key diff|type => {arr, idx}

    function log(msg){
      statusEl.textContent = "Status: " + msg;
    }

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function getList(diff, type){
      const b = WORDS[diff];
      if(!b) return [];
      if(type==="all") return [...b.nomen, ...b.verb, ...b.adj];
      return b[type] || [];
    }

    function nextHiddenWord(){
      const diff = difficultyEl.value;
      const type = typeEl.value;
      const key = diff + "|" + type;

      if(!deck[key] || deck[key].idx >= deck[key].arr.length){
        deck[key] = { arr: shuffle(getList(diff, type)), idx: 0 };
      }

      currentWord = deck[key].arr[deck[key].idx++] || "Keine WÃ¶rter";
      revealed = false;

      wordHint.textContent = "Wort ist versteckt.";
      wordEl.textContent = "â€¢â€¢â€¢â€¢â€¢";
      revealBtn.disabled = false;
      rightBtn.disabled = true;
      wrongBtn.disabled = true;

      log("Wort vorbereitet âœ… (versteckt)");
    }

    function updateTurn(){
      turnBox.classList.remove("hidden");
      turnName.textContent = (currentPlayer === 1) ? name1 : name2;
      log("Dran ist: " + turnName.textContent);
    }

    function showHandoff(){
      const who = (currentPlayer === 1) ? name1 : name2;
      handoffText.textContent = `Gib das Handy an ${who} und drÃ¼cke dann â€žOkay!â€œ.`;
      handoff.classList.add("show");
      log("Ãœbergabe an " + who);
    }

    function startGame(){
      log("Start geklickt âœ…");

      name1 = (p1nameEl.value||"").trim() || "Spieler 1";
      const raw2 = (p2nameEl.value||"").trim();
      twoPlayers = raw2.length > 0;
      name2 = raw2 || "Spieler 2";

      started = true;
      currentPlayer = 1;

      // Lock settings
      p1nameEl.disabled = true;
      p2nameEl.disabled = true;
      difficultyEl.disabled = true;
      typeEl.disabled = true;
      startBtn.disabled = true;

      updateTurn();
      nextHiddenWord();

      if(twoPlayers){
        revealBtn.disabled = true;
        showHandoff();
      } else {
        revealBtn.disabled = false;
        log("Solo gestartet âœ…");
      }
    }

    function revealWord(){
      if(!started){
        log("Du musst erst Start drÃ¼cken ðŸ™‚");
        return;
      }
      if(!currentWord){
        nextHiddenWord(); // self-heal
      }
      if(revealed) return;
      revealed = true;

      wordHint.textContent = "Wort:";
      wordEl.textContent = currentWord;

      revealBtn.disabled = true;
      rightBtn.disabled = false;
      wrongBtn.disabled = false;

      log("Wort angezeigt âœ…");
    }

    function roundDone(){
      // Wechsel (nur bei 2 Spielern)
      if(twoPlayers){
        currentPlayer = (currentPlayer === 1) ? 2 : 1;
        updateTurn();
      }
      // Neues Wort vorbereiten
      nextHiddenWord();

      if(twoPlayers){
        revealBtn.disabled = true;
        showHandoff();
      }
    }

    function reset(){
      started = false;
      currentWord = null;
      revealed = false;
      currentPlayer = 1;
      twoPlayers = false;

      p1nameEl.disabled = false;
      p2nameEl.disabled = false;
      difficultyEl.disabled = false;
      typeEl.disabled = false;
      startBtn.disabled = false;

      handoff.classList.remove("show");
      turnBox.classList.add("hidden");

      wordHint.textContent = "DrÃ¼ck Start ðŸ˜Š";
      wordEl.textContent = "â€”";
      revealBtn.disabled = true;
      rightBtn.disabled = true;
      wrongBtn.disabled = true;

      log("bereit âœ…");
    }

    // WICHTIG: Events erst nach DOM ready
    document.addEventListener("DOMContentLoaded", () => {
      startBtn.addEventListener("click", startGame);
      restartBtn.addEventListener("click", reset);
      revealBtn.addEventListener("click", revealWord);
      rightBtn.addEventListener("click", roundDone);
      wrongBtn.addEventListener("click", roundDone);
      handoffOk.addEventListener("click", () => {
        handoff.classList.remove("show");
        revealBtn.disabled = false;
        log("Ãœbergabe okay âœ… Jetzt Wort anzeigen");
      });
      reset();
    });
  </script>
</body>
</html>