<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wordy</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700;800&family=Nunito:wght@700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink:#0F172A; --muted:#64748B;
      --stroke: rgba(15,23,42,.10);
      --glass: rgba(255,255,255,.80);
      --shadow: 0 18px 50px rgba(15,23,42,.14);
      --shadow2: 0 10px 24px rgba(15,23,42,.10);
      --ring: 0 0 0 4px rgba(124,58,237,.18);
      --p1:#8B5CF6; --p2:#EC4899; --c1:#06B6D4;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1100px 700px at 15% 10%, #FFE3F1 0%, transparent 55%),
        radial-gradient(950px 700px at 85% 25%, #D8F5FF 0%, transparent 58%),
        radial-gradient(900px 700px at 55% 95%, #E8FFE7 0%, transparent 55%),
        linear-gradient(180deg, #FFF7FB, #F2FBFF);
      min-height:100vh;
      overflow-x:hidden;
    }
    .wrap{ max-width:640px; margin:0 auto; padding:20px 16px 34px; }
    .brand{ text-align:center; margin:6px 0 12px; }
    .brand h1{
      margin:0;
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:56px; line-height:1; font-weight:800;
      background: linear-gradient(135deg, var(--p1), var(--p2), var(--c1));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .brand p{ margin:10px 0 0; font-size:14px; color:var(--muted); font-weight:900; }

    .card{
      background: var(--glass);
      border: 2px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      border-radius: 30px;
      padding: 16px;
      backdrop-filter: blur(14px);
    }
    .panel{
      background: rgba(255,255,255,.82);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow2);
      border-radius: 22px;
      padding: 14px;
    }
    label{
      display:block; font-size:12px; color:var(--muted);
      margin:2px 0 8px; font-weight:1000; letter-spacing:.3px;
      text-transform: uppercase;
    }
    input, select, button{
      width:100%;
      font-size:16px;
      border-radius:18px;
      padding:14px 14px;
      font-family:"Nunito",system-ui,sans-serif;
    }
    input, select{
      background:#fff; color:var(--ink);
      border:2px solid rgba(15,23,42,.08);
      outline:none;
      box-shadow: 0 8px 18px rgba(15,23,42,.06);
    }
    input:focus, select:focus{ box-shadow: var(--ring); border-color: rgba(124,58,237,.35); }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px; }

    button{
      border:none; cursor:pointer;
      font-weight:1000;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 14px 22px rgba(15,23,42,.14);
      position:relative; overflow:hidden;
      transition: transform .08s ease, filter .15s ease;
    }
    button:active{ transform: translateY(1px); }
    button:disabled{ opacity:.55; cursor:not-allowed; filter:saturate(.6); }
    button::after{
      content:"";
      position:absolute;
      inset:-40% -20% auto -20%;
      height:120%;
      background: linear-gradient(120deg, rgba(255,255,255,.0), rgba(255,255,255,.35), rgba(255,255,255,.0));
      transform: rotate(10deg);
      opacity:.6;
      pointer-events:none;
    }
    .btnPrimary{ background: linear-gradient(135deg, var(--p1), var(--p2)); color:white; }
    .btnDark{ background: linear-gradient(135deg, #111827, #334155); color:white; }
    .btnGood{ background: linear-gradient(135deg, #16A34A, #22C55E); color:white; }
    .btnBad{ background: linear-gradient(135deg, #EF4444, #F97316); color:white; }
    .btnWord{ background: linear-gradient(135deg, #06B6D4, #22C55E); color:white; }

    .turnBig{
      margin-top:14px;
      border-radius: 26px;
      padding: 14px;
      background: rgba(255,255,255,.94);
      border: 4px solid rgba(124,58,237,.22);
      box-shadow: 0 18px 30px rgba(15,23,42,.12);
      text-align:center;
    }
    .turnBig .small{
      font-size:12px; color:var(--muted); font-weight:1000;
      text-transform:uppercase; letter-spacing:.25px; margin-bottom:6px;
    }
    .turnBig .name{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:40px; font-weight:800; line-height:1.05;
    }

    .wordCard{
      margin-top:14px;
      border-radius:28px;
      padding:18px 16px;
      background: rgba(255,255,255,.96);
      border: 2px dashed rgba(124,58,237,.28);
      box-shadow: 0 18px 34px rgba(15,23,42,.12);
      text-align:center;
      min-height: 160px;
      display:flex; flex-direction:column; justify-content:center; gap:10px;
    }
    .wordHint{ font-size:13px; color:var(--muted); font-weight:1000; }
    .word{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:48px; font-weight:800; letter-spacing:-.4px; line-height:1.05;
    }
    .hidden{ display:none !important; }

    .overlay{
      position:fixed; inset:0;
      background: rgba(15,23,42,.45);
      backdrop-filter: blur(8px);
      z-index: 20000;
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
    }
    .overlay.show{ display:flex; }
    .overlayCard{
      width:min(520px, 100%);
      background: rgba(255,255,255,.95);
      border-radius: 28px;
      box-shadow: 0 24px 70px rgba(15,23,42,.30);
      padding:18px;
      text-align:center;
    }
    .overlayCard .title{
      font-family:"Baloo 2","Nunito",system-ui,sans-serif;
      font-size:34px; font-weight:800; margin: 2px 0 6px;
    }
    .overlayCard .text{ color:var(--muted); font-weight:900; margin: 0 0 14px; }
  </style>
</head>

<body>
  <div class="overlay" id="handoff">
    <div class="overlayCard">
      <div style="font-size:36px;margin-bottom:6px;">ðŸ“±âœ¨</div>
      <div class="title" id="handoffTitle">Handy weitergeben</div>
      <p class="text" id="handoffText">Gib das Handy an â€¦</p>
      <button class="btnPrimary" id="handoffOk" type="button">Okay!</button>
    </div>
  </div>

  <div class="wrap">
    <div class="brand">
      <h1>Wordy</h1>
      <p>Start â†’ Handy weitergeben â†’ Wort anzeigen â†’ bewerten</p>
    </div>

    <div class="card">
      <div class="panel">
        <label for="p1name">Name Spieler 1</label>
        <input id="p1name" type="text" placeholder="z. B. Mia" maxlength="18" />

        <label for="p2name" style="margin-top:12px;">Name Spieler 2 (optional)</label>
        <input id="p2name" type="text" placeholder="leer = 1 Spieler" maxlength="18" />

        <label for="difficulty" style="margin-top:12px;">Schwierigkeitsgrad</label>
        <select id="difficulty">
          <option value="leicht" selected>Leicht</option>
          <option value="mittel">Mittel</option>
          <option value="schwer">Schwer</option>
        </select>

        <label for="type" style="margin-top:12px;">Wortart</label>
        <select id="type">
          <option value="all" selected>Alles</option>
          <option value="nomen">Nomen</option>
          <option value="verb">Verb</option>
          <option value="adj">Adjektiv</option>
        </select>

        <div class="grid2">
          <button id="startBtn" class="btnPrimary" type="button">Start</button>
          <button id="restartBtn" class="btnDark" type="button">Neues Spiel</button>
        </div>
      </div>

      <div id="turnBox" class="turnBig hidden">
        <div class="small">Jetzt dran</div>
        <div class="name" id="turnName">Spieler 1</div>
      </div>

      <div class="wordCard">
        <div class="wordHint" id="wordHint">DrÃ¼ck Start ðŸ˜Š</div>
        <div class="word" id="word">â€”</div>
        <button id="revealBtn" class="btnWord" type="button" disabled>Wort anzeigen</button>
      </div>

      <div class="grid2" style="margin-top:12px;">
        <button id="rightBtn" class="btnGood" type="button" disabled>Richtig (+1)</button>
        <button id="wrongBtn" class="btnBad" type="button" disabled>Falsch (âˆ’1)</button>
      </div>
    </div>
  </div>

  <script>
    const WORDS = {
      leicht: {
        nomen: ["Apfel","Hund","Katze","Schule","Buch","Ball","Auto","Blume","Baum","Brot","KÃ¤se","Milch","Sonne","Regen","Wasser","Eis","Tisch","Stuhl","Bett","Haus"],
        verb:  ["laufen","springen","lesen","malen","lachen","schlafen","essen","trinken","spielen","singen","tanzen","kaufen","helfen","finden","werfen","sehen","hÃ¶ren","rufen","sitzen","stehen"],
        adj:   ["bunt","schnell","langsam","groÃŸ","klein","nett","laut","leise","warm","kalt","rund","weich","hart","sauber","schmutzig","lustig","traurig","stark","schwach","frÃ¶hlich"]
      },
      mittel: {
        nomen: ["Abenteuer","Geheimnis","Regenbogen","Bibliothek","Schatzkarte","Kompass","Rakete","Astronaut","Roboter","Dschungel","Vulkan","Wasserfall","Labyrinth","Pyramide","Mikroskop","Experiment","Orchester","Publikum","TrophÃ¤e","Teamgeist"],
        verb:  ["entdecken","verstecken","vergleichen","erklÃ¤ren","beobachten","erfinden","trainieren","Ã¼berzeugen","organisieren","reparieren","untersuchen","kombinieren","vermeiden","beschreiben","planen","Ã¼berraschen","verbessern","entscheiden","verÃ¤ndern","kontern"],
        adj:   ["neugierig","geheim","riesig","knifflig","tapfer","geduldig","plÃ¶tzlich","vorsichtig","aufmerksam","vertrÃ¤umt","mysteriÃ¶s","elegant","praktisch","hilfsbereit","ehrlich","mutig","stolz","witzig","ruhig","wild"]
      },
      schwer: {
        nomen: ["Gerechtigkeit","Verantwortung","Interpretation","Perspektive","Widerspruch","Zusammenhang","Entscheidung","VerÃ¤nderung","Nachhaltigkeit","Bewusstsein","Selbstvertrauen","Zivilcourage","Datenschutz","Filterblase","Klimawandel","BiodiversitÃ¤t","Argumentation","Diplomatie","KomplexitÃ¤t","Konsequenz"],
        verb:  ["reflektieren","argumentieren","interpretieren","priorisieren","analysieren","kritisieren","differenzieren","veranschaulichen","abstrahieren","konkretisieren","systematisieren","koordinieren","konstruieren","formulieren","hinterfragen","relativieren","prognostizieren","strukturieren","implizieren","moderieren"],
        adj:   ["ambivalent","konsequent","nachhaltig","subtil","detailliert","kontrovers","komplex","fragil","pragmatisch","konstruktiv","kritisch","innovativ","authentisch","intuitiv","reflektiert","nuanciert","souverÃ¤n","resilient","solidarisch","autonom"]
      }
    };

    const p1nameEl = document.getElementById("p1name");
    const p2nameEl = document.getElementById("p2name");
    const difficultyEl = document.getElementById("difficulty");
    const typeEl = document.getElementById("type");

    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");
    const revealBtn = document.getElementById("revealBtn");
    const rightBtn = document.getElementById("rightBtn");
    const wrongBtn = document.getElementById("wrongBtn");

    const turnBox = document.getElementById("turnBox");
    const turnName = document.getElementById("turnName");

    const wordHint = document.getElementById("wordHint");
    const wordEl = document.getElementById("word");

    const handoff = document.getElementById("handoff");
    const handoffText = document.getElementById("handoffText");
    const handoffOk = document.getElementById("handoffOk");

    let started=false;
    let revealed=false;
    let currentWord=null;

    let name1="Spieler 1";
    let name2="Spieler 2";
    let isTwoPlayers=false;
    let currentPlayer=1;

    const deckState = {}; // key = diff|type

    function shuffle(arr){
      const a = arr.slice();
      for (let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function getList(diff, type){
      const b = WORDS[diff];
      if (!b) return [];
      if (type==="all") return [...b.nomen, ...b.verb, ...b.adj];
      return b[type] || [];
    }

    function ensureDeck(diff, type){
      const key = `${diff}|${type}`;
      const list = getList(diff, type);
      if (!deckState[key] || deckState[key].idx >= deckState[key].deck.length){
        deckState[key] = { deck: shuffle(list), idx: 0 };
      }
    }

    function newHiddenWord(){
      const diff = difficultyEl.value;
      const type = typeEl.value;

      ensureDeck(diff, type);
      const key = `${diff}|${type}`;
      const ds = deckState[key];

      currentWord = ds.deck.length ? ds.deck[ds.idx++] : "Keine WÃ¶rter.";
      revealed = false;

      wordHint.textContent = "Wort ist versteckt.";
      wordEl.textContent = "â€¢â€¢â€¢â€¢â€¢";

      revealBtn.disabled = false;
      rightBtn.disabled = true;
      wrongBtn.disabled = true;
    }

    function showHandoff(){
      const who = (currentPlayer===1) ? name1 : name2;
      handoffText.textContent = `Gib das Handy an ${who} und drÃ¼cke dann â€žOkay!â€œ.`;
      handoff.classList.add("show");
    }
    function hideHandoff(){ handoff.classList.remove("show"); }

    function updateTurnUI(){
      if (!started){ turnBox.classList.add("hidden"); return; }
      turnBox.classList.remove("hidden");
      turnName.textContent = (currentPlayer===1) ? name1 : name2;
    }

    function startGame(){
      name1 = (p1nameEl.value||"").trim() || "Spieler 1";
      const raw2 = (p2nameEl.value||"").trim();
      isTwoPlayers = raw2.length > 0;
      name2 = raw2 || "Spieler 2";

      started = true;
      currentPlayer = 1;

      p1nameEl.disabled = true;
      p2nameEl.disabled = true;
      difficultyEl.disabled = true;
      typeEl.disabled = true;
      startBtn.disabled = true;

      updateTurnUI();
      newHiddenWord();

      // Solo: direkt Wort anzeigen
      if (!isTwoPlayers) {
        revealBtn.disabled = false;
      } else {
        revealBtn.disabled = true;
        showHandoff();
      }
    }

    function revealWord(){
      if (!started) return;

      // â€œSelbstheilungâ€: falls aus irgendeinem Grund kein Wort gesetzt ist
      if (!currentWord) newHiddenWord();

      if (revealed) return;
      revealed = true;

      wordHint.textContent = "Wort:";
      wordEl.textContent = currentWord;

      revealBtn.disabled = true;
      rightBtn.disabled = false;
      wrongBtn.disabled = false;
    }

    function applyResult(delta){
      if (!started) return;

      // Nach Bewertung: Spielerwechsel, neues Wort versteckt, Ãœbergabe-Screen
      if (isTwoPlayers){
        currentPlayer = (currentPlayer===1) ? 2 : 1;
        updateTurnUI();
      }

      newHiddenWord();

      if (isTwoPlayers){
        revealBtn.disabled = true;
        showHandoff();
      }
    }

    function resetGame(){
      started=false; revealed=false; currentWord=null;
      currentPlayer=1;

      p1nameEl.disabled = false;
      p2nameEl.disabled = false;
      difficultyEl.disabled = false;
      typeEl.disabled = false;
      startBtn.disabled = false;

      hideHandoff();
      turnBox.classList.add("hidden");

      wordHint.textContent = "DrÃ¼ck Start ðŸ˜Š";
      wordEl.textContent = "â€”";

      revealBtn.disabled = true;
      rightBtn.disabled = true;
      wrongBtn.disabled = true;
    }

    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", resetGame);
    revealBtn.addEventListener("click", revealWord);
    rightBtn.addEventListener("click", () => applyResult(+1));
    wrongBtn.addEventListener("click", () => applyResult(-1));
    handoffOk.addEventListener("click", () => {
      hideHandoff();
      revealBtn.disabled = false;
    });

    resetGame();
  </script>
</body>
</html>