<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wordy</title>
  <meta name="theme-color" content="#111827" />
  <link rel="manifest" href="manifest.json" />

  <style>
    :root{
      --bg1:#FFF7FB;
      --bg2:#F2FBFF;
      --card:#FFFFFFCC;
      --ink:#1F2937;
      --muted:#6B7280;
      --stroke:#E5E7EB;
      --shadow: 0 12px 30px rgba(31,41,55,.10);
      --ring: 0 0 0 4px rgba(124,58,237,.18);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 10% 10%, #FFE3F1 0%, transparent 55%),
        radial-gradient(900px 600px at 85% 25%, #D8F5FF 0%, transparent 55%),
        radial-gradient(900px 700px at 55% 95%, #E8FFE7 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      overflow-x:hidden;
    }

    .wrap{
      max-width:560px;
      margin:0 auto;
      padding:18px 16px 28px;
      position:relative;
    }

    /* Sticker-Deko */
    .sticker{
      position:absolute;
      width:92px; height:92px;
      opacity:.90;
      filter: drop-shadow(0 10px 18px rgba(31,41,55,.12));
      pointer-events:none;
    }
    .sticker.a{ top:10px; right:6px; transform: rotate(8deg); }
    .sticker.b{ top:86px; left:-6px; transform: rotate(-10deg); opacity:.82; }

    .header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-top:6px;
      margin-bottom:14px;
    }
    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    h1{
      margin:0;
      font-size:26px;
      line-height:1.1;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      font-size:13px;
      color:var(--muted);
    }

    .card{
      background:var(--card);
      border:1px solid rgba(229,231,235,.8);
      border-radius:22px;
      padding:16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    label{
      display:block;
      font-size:13px;
      color:var(--muted);
      margin:2px 0 8px;
      text-align:left;
    }

    select, button{
      width:100%;
      font-size:16px;
      border-radius:16px;
      padding:14px 14px;
    }

    select{
      background:#fff;
      color:var(--ink);
      border:1px solid var(--stroke);
      outline:none;
    }
    select:focus{ box-shadow: var(--ring); border-color: rgba(124,58,237,.35); }

    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }

    button{
      border:none;
      cursor:pointer;
      font-weight:900;
      letter-spacing:.2px;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 10px 18px rgba(31,41,55,.12);
      transition: transform .08s ease;
    }
    button:active{ transform: translateY(1px); }

    .start{
      background: linear-gradient(135deg,#7C3AED,#EC4899);
      color:white;
    }

    .good{
      background: linear-gradient(135deg,#16A34A,#22C55E);
      color:white;
    }

    .bad{
      background: linear-gradient(135deg,#EF4444,#F97316);
      color:white;
    }

    .word{
      margin-top:14px;
      padding:18px 16px;
      border-radius:20px;
      background: #FFFFFF;
      border:1px dashed rgba(124,58,237,.35);
      text-align:center;
      font-size:34px;
      min-height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      will-change: transform, opacity;
    }

    /* Wort-Pop Animation */
    .pop{ animation: popIn .22s ease-out; }
    @keyframes popIn{
      from{ transform: scale(.96); opacity:.65; }
      to{ transform: scale(1); opacity:1; }
    }

    .scoreBox{
      margin-top:14px;
      padding:12px 14px;
      border-radius:16px;
      background:#fff;
      border:1px solid rgba(229,231,235,.9);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-weight:900;
    }
    .muted{
      font-weight:800;
      color:var(--muted);
    }

    /* Titel-Bounce */
    .titleBounce{ animation: titleBounce .45s ease-out; }
    @keyframes titleBounce{
      0%{ transform: translateY(0) scale(1); }
      30%{ transform: translateY(-2px) scale(1.03); }
      60%{ transform: translateY(1px) scale(.995); }
      100%{ transform: translateY(0) scale(1); }
    }

    .chips{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:center;
    }
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid rgba(229,231,235,.9);
      color:var(--muted);
    }

    .hidden{ display:none !important; }

    /* Konfetti Layer */
    #confetti{
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
    }
    .confetto{
      position:absolute;
      top:-20px;
      width:10px;
      height:14px;
      border-radius:3px;
      opacity:.95;
      animation: fall var(--dur) linear forwards;
      transform: translateX(var(--x)) rotate(var(--r));
      filter: drop-shadow(0 6px 10px rgba(31,41,55,.12));
    }
    @keyframes fall{
      to{
        transform: translateX(var(--x2)) translateY(110vh) rotate(calc(var(--r) + 540deg));
        opacity: 1;
      }
    }

    /* Level-Up Toast */
    .toastWrap{
      position: fixed;
      left: 0; right: 0;
      top: 14px;
      display:flex;
      justify-content:center;
      pointer-events:none;
      z-index: 10000;
      padding: 0 12px;
    }
    .toast{
      pointer-events:none;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(229,231,235,.9);
      box-shadow: 0 14px 30px rgba(31,41,55,.14);
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 900;
      color: var(--ink);
      display:flex;
      align-items:center;
      gap:10px;
      transform: translateY(-10px) scale(.98);
      opacity: 0;
      backdrop-filter: blur(10px);
    }
    .toast.show{
      animation: toastInOut 2.1s ease forwards;
    }
    .badge{
      width:28px; height:28px;
      border-radius:999px;
      display:grid;
      place-items:center;
      color:white;
      background: linear-gradient(135deg,#7C3AED,#EC4899);
      box-shadow: 0 10px 18px rgba(124,58,237,.18);
      flex: 0 0 auto;
    }
    .toast small{
      display:block;
      font-weight: 800;
      color: var(--muted);
      margin-top: 2px;
    }

    @keyframes toastInOut{
      0%{ opacity: 0; transform: translateY(-10px) scale(.98); }
      12%{ opacity: 1; transform: translateY(0) scale(1); }
      80%{ opacity: 1; transform: translateY(0) scale(1); }
      100%{ opacity: 0; transform: translateY(-10px) scale(.98); }
    }
  </style>
</head>

<body>
  <div id="confetti" aria-hidden="true"></div>

  <div class="toastWrap" aria-hidden="true">
    <div id="toast" class="toast">
      <div class="badge">üéâ</div>
      <div>
        <div id="toastTitle">Neuer Titel!</div>
        <small id="toastSub">Titel: Autor</small>
      </div>
    </div>
  </div>

  <div class="wrap">
    <!-- Sticker: Astronaut -->
    <svg class="sticker a" viewBox="0 0 120 120" aria-hidden="true">
      <defs>
        <linearGradient id="gA" x1="0" x2="1">
          <stop offset="0" stop-color="#A78BFA"/><stop offset="1" stop-color="#FB7185"/>
        </linearGradient>
      </defs>
      <circle cx="60" cy="60" r="52" fill="url(#gA)" opacity="0.22"/>
      <circle cx="62" cy="52" r="22" fill="#fff" stroke="#94A3B8" stroke-width="3"/>
      <rect x="42" y="70" width="44" height="30" rx="14" fill="#fff" stroke="#94A3B8" stroke-width="3"/>
      <rect x="50" y="46" width="24" height="16" rx="8" fill="#0EA5E9" opacity=".25"/>
      <circle cx="48" cy="86" r="6" fill="#22C55E" opacity=".75"/>
      <circle cx="76" cy="86" r="6" fill="#F59E0B" opacity=".75"/>
      <path d="M36 78c-10 6-16 14-16 22" stroke="#94A3B8" stroke-width="3" fill="none" stroke-linecap="round"/>
      <path d="M88 78c10 6 16 14 16 22" stroke="#94A3B8" stroke-width="3" fill="none" stroke-linecap="round"/>
    </svg>

    <!-- Sticker: Dino -->
    <svg class="sticker b" viewBox="0 0 120 120" aria-hidden="true">
      <defs>
        <linearGradient id="gD" x1="0" x2="1">
          <stop offset="0" stop-color="#34D399"/><stop offset="1" stop-color="#60A5FA"/>
        </linearGradient>
      </defs>
      <circle cx="60" cy="60" r="52" fill="url(#gD)" opacity="0.22"/>
      <path d="M34 78c0-18 12-36 34-36 20 0 30 12 30 28 0 16-12 28-30 28H52c-10 0-18-8-18-20z"
            fill="#FFFFFF" stroke="#94A3B8" stroke-width="3" stroke-linejoin="round"/>
      <circle cx="76" cy="64" r="3.5" fill="#1F2937"/>
      <path d="M70 73c4 5 10 5 14 0" stroke="#FB7185" stroke-width="3" fill="none" stroke-linecap="round"/>
      <path d="M46 54l8-10 8 10" stroke="#F59E0B" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M60 44l8-10 8 10" stroke="#F59E0B" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>

    <div class="header">
      <div class="title">
        <h1>Wordy</h1>
        <p class="sub" id="subtitle">Start dr√ºcken ‚Üí Wort erscheint ‚Üí richtig/falsch klicken.</p>
      </div>
    </div>

    <div class="card">
      <label for="lang" id="labLang">Sprache</label>
      <select id="lang">
        <option value="de">Deutsch</option>
        <option value="it">Italiano</option>
      </select>

      <label for="type" id="labType" style="margin-top:12px;">Wortart</label>
      <select id="type">
        <option value="all" selected>Alles</option>
        <option value="nomen">Nomen</option>
        <option value="verb">Verb</option>
        <option value="adj">Adjektiv</option>
      </select>

      <button id="startBtn" class="start" style="margin-top:12px;">Start</button>

      <div class="word" id="word">‚Äî</div>

      <div class="scoreBox">
        <span id="scoreText">Punkte: 0</span>
        <span class="muted" id="titleText">Titel: Anf√§nger</span>
      </div>

      <div class="row" id="playRow">
        <button id="rightBtn" class="good" type="button">Richtig (+1)</button>
        <button id="wrongBtn" class="bad" type="button">Falsch (‚àí1)</button>
      </div>

      <div class="chips" aria-hidden="true">
        <span class="chip">ü¶ñ Dino</span>
        <span class="chip">üë©‚ÄçüöÄ Astronaut</span>
        <span class="chip">üéâ Level-Up</span>
      </div>
    </div>
  </div>

  <script>
    const TITLES = {
      de: ["Anf√§nger","Autor","Erz√§hler","Wortmeister","Sprachheld","Legende","Mythos","Sternenschreiber"],
      it: ["Principiante","Autore","Narratore","Maestro delle parole","Eroe della lingua","Leggenda","Mito","Scrittore stellare"]
    };

    const WORDS = {
      de: {
        nomen: ["Apfel","Hund","Schule","Buch","Fahrrad","Wald","Meer","Rakete","Roboter","Freundschaft","Kuchen","Berg","Bibliothek","Detektiv","Regenbogen"],
        verb:  ["laufen","springen","lesen","denken","schreiben","malen","lachen","fl√ºstern","klettern","bauen","entdecken","helfen","r√§tseln","suchen","trainieren"],
        adj:   ["mutig","lustig","leise","schnell","klug","freundlich","geheim","riesig","bunt","neugierig","geduldig","stark","zart","chaotisch","tapfer"]
      },
      it: {
        nomen: ["mela","cane","scuola","libro","bicicletta","bosco","mare","razzo","robot","amicizia","torta","montagna","biblioteca","detective","arcobaleno"],
        verb:  ["correre","saltare","leggere","pensare","scrivere","dipingere","ridere","sussurrare","arrampicare","costruire","scoprire","aiutare","indovinare","cercare","allenarsi"],
        adj:   ["coraggioso","divertente","silenzioso","veloce","intelligente","gentile","segreto","gigante","colorato","curioso","paziente","forte","delicato","caotico","valoroso"]
      }
    };

    const langEl = document.getElementById("lang");
    const typeEl = document.getElementById("type");
    const startBtn = document.getElementById("startBtn");
    const rightBtn = document.getElementById("rightBtn");
    const wrongBtn = document.getElementById("wrongBtn");
    const wordEl = document.getElementById("word");
    const scoreText = document.getElementById("scoreText");
    const titleText = document.getElementById("titleText");
    const subtitle = document.getElementById("subtitle");
    const labLang = document.getElementById("labLang");
    const labType = document.getElementById("labType");
    const confettiLayer = document.getElementById("confetti");

    const toast = document.getElementById("toast");
    const toastTitle = document.getElementById("toastTitle");
    const toastSub = document.getElementById("toastSub");

    let points = 0;
    let started = false;
    let lastTitleIndex = 0;

    const state = {}; // decks

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function getList(lang, type) {
      if (type === "all") return [...WORDS[lang].nomen, ...WORDS[lang].verb, ...WORDS[lang].adj];
      return WORDS[lang][type] || [];
    }

    function ensureDeck(lang, type) {
      const key = `${lang}|${type}`;
      const list = getList(lang, type);
      if (!state[key] || state[key].idx >= state[key].deck.length) {
        state[key] = { deck: shuffle(list), idx: 0 };
      }
    }

    function popWord() {
      wordEl.classList.remove("pop");
      void wordEl.offsetWidth;
      wordEl.classList.add("pop");
    }

    function nextWord() {
      const lang = langEl.value;
      const type = typeEl.value;

      ensureDeck(lang, type);
      const key = `${lang}|${type}`;
      const deckState = state[key];

      wordEl.textContent = deckState.deck.length ? deckState.deck[deckState.idx++] : ((lang==="it") ? "Nessuna parola." : "Keine W√∂rter.");
      popWord();
    }

    function clampTitleIndex(i) {
      if (i < 0) return 0;
      const max = TITLES.de.length - 1;
      return (i > max) ? max : i;
    }

    function burstConfetti() {
      const colors = ["#A78BFA","#FB7185","#34D399","#60A5FA","#F59E0B","#22C55E","#06B6D4","#F472B6"];
      const n = 44;
      const w = window.innerWidth;

      for (let i = 0; i < n; i++) {
        const c = document.createElement("div");
        c.className = "confetto";

        const x = Math.floor(Math.random() * w);
        const drift2 = (Math.random() * 240 - 120) + (Math.random() * 240 - 120);
        const r = Math.floor(Math.random() * 360);
        const dur = (Math.random() * 0.9 + 0.9).toFixed(2) + "s";

        c.style.left = x + "px";
        c.style.background = colors[Math.floor(Math.random() * colors.length)];
        c.style.setProperty("--x", "0px");
        c.style.setProperty("--x2", drift2 + "px");
        c.style.setProperty("--r", r + "deg");
        c.style.setProperty("--dur", dur);
        c.style.width = (8 + Math.random() * 8).toFixed(0) + "px";
        c.style.height = (10 + Math.random() * 10).toFixed(0) + "px";
        c.style.opacity = (0.75 + Math.random() * 0.25).toFixed(2);

        confettiLayer.appendChild(c);
        c.addEventListener("animationend", () => c.remove());
      }
    }

    function bounceTitle() {
      titleText.classList.remove("titleBounce");
      void titleText.offsetWidth;
      titleText.classList.add("titleBounce");
    }

    function showLevelUpToast(lang, newTitle) {
      toast.classList.remove("show");
      void toast.offsetWidth;

      if (lang === "it") {
        toastTitle.textContent = "Nuovo titolo!";
        toastSub.textContent = `Titolo: ${newTitle}`;
      } else {
        toastTitle.textContent = "Neuer Titel!";
        toastSub.textContent = `Titel: ${newTitle}`;
      }

      toast.classList.add("show");
    }

    function updateScoreUI() {
      const lang = langEl.value;
      const idx = clampTitleIndex(Math.floor(points / 5));
      const title = TITLES[lang][idx];

      if (lang === "it") {
        scoreText.textContent = `Punti: ${points}`;
        titleText.textContent = `Titolo: ${title}`;
      } else {
        scoreText.textContent = `Punkte: ${points}`;
        titleText.textContent = `Titel: ${title}`;
      }

      if (idx > lastTitleIndex) {
        bounceTitle();
        burstConfetti();
        showLevelUpToast(lang, title);
      }
      lastTitleIndex = idx;
    }

    function setUiLanguage() {
      const lang = langEl.value;

      if (lang === "it") {
        labLang.textContent = "Lingua";
        labType.textContent = "Categoria";
        startBtn.textContent = started ? "In corso‚Ä¶" : "Start";
        rightBtn.textContent = "Giusto (+1)";
        wrongBtn.textContent = "Sbagliato (‚àí1)";
        subtitle.textContent = "Premi Start ‚Üí appare una parola ‚Üí giusto/sbagliato.";
        typeEl.querySelector('option[value="all"]').textContent = "Tutto";
        typeEl.querySelector('option[value="nomen"]').textContent = "Sostantivo";
        typeEl.querySelector('option[value="verb"]').textContent = "Verbo";
        typeEl.querySelector('option[value="adj"]').textContent = "Aggettivo";
      } else {
        labLang.textContent = "Sprache";
        labType.textContent = "Wortart";
        startBtn.textContent = started ? "L√§uft‚Ä¶" : "Start";
        rightBtn.textContent = "Richtig (+1)";
        wrongBtn.textContent = "Falsch (‚àí1)";
        subtitle.textContent = "Start dr√ºcken ‚Üí Wort erscheint ‚Üí richtig/falsch klicken.";
        typeEl.querySelector('option[value="all"]').textContent = "Alles";
        typeEl.querySelector('option[value="nomen"]').textContent = "Nomen";
        typeEl.querySelector('option[value="verb"]').textContent = "Verb";
        typeEl.querySelector('option[value="adj"]').textContent = "Adjektiv";
      }

      updateScoreUI();
    }

    function startGame() {
      started = true;
      langEl.disabled = true;
      typeEl.disabled = true;
      startBtn.disabled = true;
      setUiLanguage();
      nextWord();
    }

    function applyResult(delta) {
      if (!started) return;
      points += delta;
      updateScoreUI();
      nextWord();
    }

    // Startzustand
    document.getElementById("playRow").classList.add("hidden");
    wordEl.textContent = "‚Äî";
    lastTitleIndex = 0;
    updateScoreUI();
    setUiLanguage();

    startBtn.addEventListener("click", () => {
      document.getElementById("playRow").classList.remove("hidden");
      startGame();
    });
    rightBtn.addEventListener("click", () => applyResult(+1));
    wrongBtn.addEventListener("click", () => applyResult(-1));
    langEl.addEventListener("change", setUiLanguage);

    // Offline/Cache
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => navigator.serviceWorker.register("./sw.js"));
    }
  </script>
</body>
</html>
```Ó®Å0Ó®Ç