<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wordy</title>
  <meta name="theme-color" content="#111827" />
  <link rel="manifest" href="manifest.json" />

  <style>
    :root{
      --bg1:#FFF7FB;
      --bg2:#F2FBFF;
      --card:#FFFFFFCC;
      --ink:#1F2937;
      --muted:#6B7280;
      --stroke:#E5E7EB;
      --shadow: 0 12px 30px rgba(31,41,55,.10);
      --primary:#7C3AED;      /* lila */
      --ring: 0 0 0 4px rgba(124,58,237,.18);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 10% 10%, #FFE3F1 0%, transparent 55%),
        radial-gradient(900px 600px at 85% 25%, #D8F5FF 0%, transparent 55%),
        radial-gradient(900px 700px at 55% 95%, #E8FFE7 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      overflow-x:hidden;
    }

    .wrap{
      max-width:560px;
      margin:0 auto;
      padding:18px 16px 28px;
      position:relative;
    }

    /* Sticker-Deko */
    .sticker{
      position:absolute;
      width:92px; height:92px;
      opacity:.90;
      filter: drop-shadow(0 10px 18px rgba(31,41,55,.12));
      pointer-events:none;
    }
    .sticker.a{ top:10px; right:6px; transform: rotate(8deg); }
    .sticker.b{ top:86px; left:-6px; transform: rotate(-10deg); opacity:.82; }

    .header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-top:6px;
      margin-bottom:14px;
    }
    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    h1{
      margin:0;
      font-size:26px;
      line-height:1.1;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      font-size:13px;
      color:var(--muted);
    }

    .card{
      background:var(--card);
      border:1px solid rgba(229,231,235,.8);
      border-radius:22px;
      padding:16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    label{
      display:block;
      font-size:13px;
      color:var(--muted);
      margin:2px 0 8px;
    }

    select, button{
      width:100%;
      font-size:16px;
      border-radius:16px;
      padding:14px 14px;
    }

    select{
      background:#fff;
      color:var(--ink);
      border:1px solid var(--stroke);
      outline:none;
    }
    select:focus{ box-shadow: var(--ring); border-color: rgba(124,58,237,.35); }

    .btnRow{
      display:flex;
      gap:10px;
      margin-top:12px;
    }

    button{
      border:none;
      color:white;
      cursor:pointer;
      font-weight:800;
      letter-spacing:.2px;
      box-shadow: 0 10px 18px rgba(124,58,237,.20);
      background: linear-gradient(135deg, var(--primary), #EC4899);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: translateY(1px); }

    .secondary{
      background: linear-gradient(135deg, #06B6D4, #22C55E);
      box-shadow: 0 10px 18px rgba(34,197,94,.18);
    }

    .word{
      margin-top:14px;
      padding:18px 16px;
      border-radius:20px;
      background: #FFFFFF;
      border:1px dashed rgba(124,58,237,.35);
      text-align:center;
      font-size:32px;
      min-height:54px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
      text-align:center;
    }

    .chips{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:center;
    }
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid rgba(229,231,235,.9);
      color:var(--muted);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- Sticker: Astronaut -->
    <svg class="sticker a" viewBox="0 0 120 120" aria-hidden="true">
      <defs>
        <linearGradient id="gA" x1="0" x2="1">
          <stop offset="0" stop-color="#A78BFA"/><stop offset="1" stop-color="#FB7185"/>
        </linearGradient>
      </defs>
      <circle cx="60" cy="60" r="52" fill="url(#gA)" opacity="0.22"/>
      <circle cx="62" cy="52" r="22" fill="#fff" stroke="#94A3B8" stroke-width="3"/>
      <rect x="42" y="70" width="44" height="30" rx="14" fill="#fff" stroke="#94A3B8" stroke-width="3"/>
      <rect x="50" y="46" width="24" height="16" rx="8" fill="#0EA5E9" opacity=".25"/>
      <circle cx="48" cy="86" r="6" fill="#22C55E" opacity=".75"/>
      <circle cx="76" cy="86" r="6" fill="#F59E0B" opacity=".75"/>
      <path d="M36 78c-10 6-16 14-16 22" stroke="#94A3B8" stroke-width="3" fill="none" stroke-linecap="round"/>
      <path d="M88 78c10 6 16 14 16 22" stroke="#94A3B8" stroke-width="3" fill="none" stroke-linecap="round"/>
    </svg>

    <!-- Sticker: Dino -->
    <svg class="sticker b" viewBox="0 0 120 120" aria-hidden="true">
      <defs>
        <linearGradient id="gD" x1="0" x2="1">
          <stop offset="0" stop-color="#34D399"/><stop offset="1" stop-color="#60A5FA"/>
        </linearGradient>
      </defs>
      <circle cx="60" cy="60" r="52" fill="url(#gD)" opacity="0.22"/>
      <path d="M34 78c0-18 12-36 34-36 20 0 30 12 30 28 0 16-12 28-30 28H52c-10 0-18-8-18-20z"
            fill="#FFFFFF" stroke="#94A3B8" stroke-width="3" stroke-linejoin="round"/>
      <circle cx="76" cy="64" r="3.5" fill="#1F2937"/>
      <path d="M70 73c4 5 10 5 14 0" stroke="#FB7185" stroke-width="3" fill="none" stroke-linecap="round"/>
      <path d="M46 54l8-10 8 10" stroke="#F59E0B" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M60 44l8-10 8 10" stroke="#F59E0B" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>

    <div class="header">
      <div class="title">
        <h1>Wordy</h1>
        <p class="sub">Deutsch oder Italiano: Kategorie w√§hlen ‚Üí Wort erkl√§ren ‚Üí weiter.</p>
      </div>
    </div>

    <div class="card">
      <label for="lang">Sprache</label>
      <select id="lang">
        <option value="de">Deutsch</option>
        <option value="it">Italiano</option>
      </select>

      <label for="age" style="margin-top:12px;">Alterskategorie</label>
      <select id="age"></select>

      <div class="btnRow">
        <button id="btn">Neues Wort</button>
        <button id="skip" class="secondary" type="button">Kenne ich nicht</button>
      </div>

      <div class="word" id="word">‚Äî</div>
      <div class="hint">Tipp: Wenn du das Wort nicht kennst, einfach ‚ÄûKenne ich nicht‚Äú dr√ºcken.</div>

      <div class="chips" aria-hidden="true">
        <span class="chip">ü¶ñ Dino</span>
        <span class="chip">üë©‚ÄçüöÄ Astronaut</span>
        <span class="chip">üåà Pastell</span>
        <span class="chip">üá©üá™ Deutsch</span>
        <span class="chip">üáÆüáπ Italiano</span>
      </div>
    </div>
  </div>

  <script>
    // W√∂rter nach Sprache + Alterskategorien
    const WORDS = {
      de: {
        "6‚Äì8": [
          "Apfel","Banane","Birne","Erdbeere","Kirsche","Orange","Traube","Melone","Ananas","Zitrone",
          "Hund","Katze","Pferd","Kaninchen","Hamster","Maus","Vogel","Fisch","Frosch","Igel",
          "Schule","Lehrer","Tafel","Heft","Stift","Radiergummi","Rucksack","Pause","Hausaufgabe","Ferien",
          "Ball","Puppe","Baukl√∂tze","Puzzle","Drachen","Seifenblasen","Kreide","Roller","Schaukel","Rutsche",
          "Regen","Schnee","Sonne","Wind","Wolke","Blitz","Donner","Regenbogen","Pf√ºtze","Eis",
          "Meer","See","Fluss","Berg","Wald","Wiese","Blume","Baum","Pilz","Stein",
          "Auto","Bus","Zug","Fahrrad","Rollschuh","Boot","Flugzeug","Traktor","Feuerwehr","Polizei",
          "Pizza","Nudel","Brot","K√§se","Milch","Joghurt","Keks","Schokolade","Eiscreme","Suppe",
          "Bett","Kissen","Decke","Lampe","T√ºr","Fenster","Treppe","K√ºche","Bad","Garten",
          "Uhr","Telefon","Besen","Tasse","L√∂ffel","Zahnb√ºrste","Seife","M√ºtze","Schal","Handschuh"
        ],
        "9‚Äì12": [
          "Abenteuer","Geheimnis","Detektiv","Hinweis","R√§tsel","Code","Schatzkarte","Kompass","Expedition","Entdeckung",
          "Vulkan","Erdbeben","Tornado","Hurrikan","Gletscher","W√ºste","Dschungel","Korallenriff","H√∂hle","Wasserfall",
          "Rakete","Satellit","Astronaut","Planet","Galaxie","Teleskop","Sternschnuppe","Schwerkraft","Orbit","Meteor",
          "Roboter","Programm","Algorithmus","Erfindung","Labor","Mikroskop","Experiment","Energie","Magnet","Solarzelle",
          "Bibliothek","Roman","Kapitel","Autor","Figur","Handlung","Gedicht","Comic","Zeitung","Lexikon",
          "Teamgeist","Fairness","Mut","Geduld","Neugier","Freundschaft","Vertrauen","Ehrlichkeit","Respekt","Hilfsbereitschaft",
          "Turnier","Training","Ausdauer","Rekord","Schiedsrichter","Taktik","Sprint","Staffel","Klettern","Schwimmen",
          "Instrument","Melodie","Rhythmus","Chor","Konzert","B√ºhne","Publikum","Applaus","Proben","Playlist",
          "Internet","Passwort","Profil","Nachricht","Chat","Video","Podcast","Kamera","Bildschirm","App",
          "Zeitreise","Legende","Mythos","Zaubertrank","Drachenh√∂hle","Heldenreise","Labyrinth","K√∂nigreich","Verb√ºndeter","Endboss"
        ],
        "13+": [
          "Ambition","Disziplin","Priorit√§t","Zielsetzung","Selbstbild","Identit√§t","Werte","Integrit√§t","Autonomie","Verantwortung",
          "Empathie","Resilienz","Achtsamkeit","Intuition","Reflexion","Motivation","Selbstzweifel","Selbstvertrauen","Grenzen","Konflikt",
          "Dilemma","Kompromiss","Konsens","Gerechtigkeit","Solidarit√§t","Toleranz","Vorurteil","Zivilcourage","Mitgef√ºhl","Loyalit√§t",
          "Argument","These","Beleg","Hypothese","Analyse","Kritik","Kontext","Perspektive","Nuance","Fazit",
          "Metapher","Ironie","Satire","Paradox","Narrativ","Symbolik","Interpretation","Rhetorik","Dialektik","Subtext",
          "Innovation","Strategie","Kreativit√§t","Komplexit√§t","Katalysator","Synergie","Effizienz","Nachhaltigkeit","Ressource","√ñkologie",
          "Klimawandel","Biodiversit√§t","Emission","Recycling","Kreislaufwirtschaft","Energiewende","Mobilit√§t","Wasserknappheit","Datenschutz","Filterblase",
          "Demokratie","Wahlrecht","Meinungsfreiheit","Korruption","Diplomatie","Protest","Propaganda","Aufmerksamkeit","Algorithmus","Verschl√ºsselung",
          "K√ºnstliche Intelligenz","Cyberangriff","Plattform","Karriere","Bewerbung","Praktikum","Networking","Feedback","Kommunikation","Burnout"
        ]
      },

      it: {
        "6‚Äì8": [
          "mela","banana","pera","fragola","ciliegia","arancia","uva","melone","ananas","limone",
          "cane","gatto","cavallo","coniglio","criceto","topo","uccello","pesce","rana","riccio",
          "scuola","maestra","lavagna","quaderno","penna","gomma","zaino","ricreazione","compiti","vacanze",
          "palla","bambola","costruzioni","puzzle","aquilone","bolle","gesso","monopattino","altalena","scivolo",
          "pioggia","neve","sole","vento","nuvola","fulmine","tuono","arcobaleno","pozza","ghiaccio",
          "mare","lago","fiume","montagna","bosco","prato","fiore","albero","fungo","pietra",
          "auto","bus","treno","bicicletta","pattini","barca","aereo","trattore","pompieri","polizia",
          "pizza","pasta","pane","formaggio","latte","yogurt","biscotto","cioccolato","gelato","zuppa",
          "letto","cuscino","coperta","lampada","porta","finestra","scala","cucina","bagno","giardino",
          "orologio","telefono","scopa","tazza","cucchiaio","spazzolino","sapone","cappello","sciarpa","guanto"
        ],
        "9‚Äì12": [
          "avventura","segreto","detective","indizio","enigma","codice","mappa del tesoro","bussola","spedizione","scoperta",
          "vulcano","terremoto","tornado","uragano","ghiacciaio","deserto","giungla","barriera corallina","grotta","cascata",
          "razzo","satellite","astronauta","pianeta","galassia","telescopio","stella cadente","gravit√†","orbita","meteora",
          "robot","programma","algoritmo","invenzione","laboratorio","microscopio","esperimento","energia","magnete","pannello solare",
          "biblioteca","romanzo","capitolo","autore","personaggio","trama","poesia","fumetto","giornale","dizionario",
          "spirito di squadra","correttezza","coraggio","pazienza","curiosit√†","amicizia","fiducia","onest√†","rispetto","gentilezza",
          "torneo","allenamento","resistenza","record","arbitro","tattica","sprint","staffetta","arrampicata","nuoto",
          "strumento","melodia","ritmo","coro","concerto","palco","pubblico","applauso","prove","playlist",
          "internet","password","profilo","messaggio","chat","video","podcast","fotocamera","schermo","app",
          "viaggio nel tempo","leggenda","mito","pozione","caverna del drago","labirinto","regno","alleato","boss finale","missione"
        ],
        "13+": [
          "ambizione","disciplina","priorit√†","obiettivo","identit√†","valori","integrit√†","autonomia","responsabilit√†","consapevolezza",
          "empatia","resilienza","mindfulness","intuizione","riflessione","motivazione","insicurezza","autostima","confini","conflitto",
          "dilemma","compromesso","consenso","giustizia","solidariet√†","tolleranza","pregiudizio","coraggio civile","lealt√†","fiducia",
          "argomento","tesi","prova","ipotesi","analisi","critica","contesto","prospettiva","sfumatura","conclusione",
          "metafora","ironia","satira","paradosso","narrazione","simbolismo","interpretazione","retorica","dialettica","sottotesto",
          "innovazione","strategia","creativit√†","complessit√†","catalizzatore","sinergia","efficienza","sostenibilit√†","risorsa","ecologia",
          "cambiamento climatico","biodiversit√†","emissioni","riciclo","economia circolare","transizione energetica","mobilit√†","scarsit√† d'acqua","privacy","bolla informativa",
          "democrazia","diritto di voto","libert√† di parola","corruzione","diplomazia","protesta","propaganda","attenzione","algoritmo","crittografia",
          "intelligenza artificiale","cyberattacco","piattaforma","carriera","candidatura","tirocinio","networking","feedback","comunicazione","burnout"
        ]
      }
    };

    const langSelect = document.getElementById("lang");
    const ageSelect  = document.getElementById("age");
    const wordEl     = document.getElementById("word");
    const btn        = document.getElementById("btn");
    const skip       = document.getElementById("skip");

    // Vermeidet Wiederholungen: pro Sprache+Kategorie mischen und der Reihe nach ziehen
    const state = {}; // key = "de|6‚Äì8" etc.

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function ensureDeck(lang, cat) {
      const key = `${lang}|${cat}`;
      const list = (WORDS[lang] && WORDS[lang][cat]) ? WORDS[lang][cat] : [];
      if (!state[key] || state[key].idx >= state[key].deck.length) {
        state[key] = { deck: shuffle(list), idx: 0 };
      }
    }

    function nextWord() {
      const lang = langSelect.value;
      const cat  = ageSelect.value;

      ensureDeck(lang, cat);
      const key = `${lang}|${cat}`;
      const deckState = state[key];

      if (!deckState.deck.length) {
        wordEl.textContent = (lang === "it") ? "Nessuna parola in questa scelta." : "Keine W√∂rter in dieser Auswahl.";
        return;
      }

      wordEl.textContent = deckState.deck[deckState.idx++];

      localStorage.setItem("wg_last_cat", cat);
      localStorage.setItem("wg_last_lang", lang);
    }

    function setUiLanguage() {
      const lang = langSelect.value;
      btn.textContent  = (lang === "it") ? "Nuova parola" : "Neues Wort";
      skip.textContent = (lang === "it") ? "Non lo so" : "Kenne ich nicht";
      document.querySelector('label[for="lang"]').textContent = (lang === "it") ? "Lingua" : "Sprache";
      document.querySelector('label[for="age"]').textContent  = (lang === "it") ? "Fascia d'et√†" : "Alterskategorie";
      document.querySelector(".sub").textContent = (lang === "it")
        ? "Deutsch o Italiano: scegli categoria ‚Üí spiega la parola ‚Üí avanti."
        : "Deutsch oder Italiano: Kategorie w√§hlen ‚Üí Wort erkl√§ren ‚Üí weiter.";
      document.querySelector(".hint").textContent = (lang === "it")
        ? "Tip: se non conosci la parola, premi ‚ÄûNon lo so‚Äú."
        : "Tipp: Wenn du das Wort nicht kennst, einfach ‚ÄûKenne ich nicht‚Äú dr√ºcken.";
    }

    function init() {
      // Alterskategorien aus (Deutsch) ableiten ‚Äì sind in beiden Sprachen gleich
      const cats = Object.keys(WORDS.de);
      cats.forEach(c => {
        const opt = document.createElement("option");
        opt.value = c;
        opt.textContent = c;
        ageSelect.appendChild(opt);
      });

      // Letzte Auswahl wiederherstellen
      const lastLang = localStorage.getItem("wg_last_lang");
      if (lastLang && WORDS[lastLang]) langSelect.value = lastLang;

      const lastCat = localStorage.getItem("wg_last_cat");
      if (lastCat && cats.includes(lastCat)) ageSelect.value = lastCat;

      setUiLanguage();

      btn.addEventListener("click", nextWord);
      skip.addEventListener("click", nextWord);

      langSelect.addEventListener("change", () => {
        wordEl.textContent = "‚Äî";
        setUiLanguage();
      });

      ageSelect.addEventListener("change", () => {
        wordEl.textContent = "‚Äî";
      });

      // Optional: beim Start direkt ein Wort anzeigen:
      // nextWord();
    }

    // Offline/Cache
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => navigator.serviceWorker.register("./sw.js"));
    }

    init();
  </script>
</body>
</html>
